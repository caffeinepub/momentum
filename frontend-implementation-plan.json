{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix Skipped Day Reset to uncheck all boxes and reset streak to 0",
  "requirements": [
    {
      "id": "REQ-2",
      "summary": "Fix the Skipped Day Reset frontend handler in the Start New Day dialog so that after the reset mutation completes, the UI reflects all checkboxes as unchecked and the streak count displayed as 0 by invalidating or updating the relevant React Query caches for routines and streak data.",
      "acceptanceCriteria": [
        "After clicking Skipped Day Reset, all routine checkboxes immediately appear unchecked in the UI.",
        "After clicking Skipped Day Reset, the streak count displayed in the UI shows 0.",
        "The UI state is consistent with a fresh re-fetch from the backend."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add or modify the useResetSkippedDay mutation hook to properly invalidate the morning routine queries after the backend resetSkippedDay call completes. Ensure the mutation's onSuccess callback invalidates the query key ['morningRoutines'] and any related routine data cache keys to force a fresh fetch that will show all checkboxes unchecked and streak counts reset to 0."
        },
        {
          "path": "frontend/src/components/Header.tsx",
          "operation": "modify",
          "description": "Update the Skipped Day Reset button handler in the Start New Day dialog to call the useResetSkippedDay mutation and wait for completion. After the mutation succeeds, ensure the UI updates immediately by relying on the query invalidation from the mutation hook. Verify that the dialog closes only after the mutation completes and cache invalidation triggers a refetch showing updated routine states."
        }
      ]
    }
  ]
}