{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 12,
  "summary": "Momentum is a full-stack personal productivity PWA built for the Internet Computer (Motoko canister backend + React/TypeScript frontend). Users authenticate with Internet Identity, manage tasks using an Eisenhower 2×2 quadrant matrix (“Daily Priorities”) plus custom planning lists (“Plan mode”), and maintain morning/evening routines with completion and streak tracking. An optional “earnings/monetary” layer lets users configure daily income buckets, submit payroll to a running balance, log spending (including a non-deducting “Pre-deducted” type), manage spend presets, and view basic spending insights charts. Admin RBAC supports listing users and promoting/demoting admins via an in-app admin dashboard.",
  "existing_features": [
    {
      "id": "IF-1",
      "title": "Internet Identity authentication context",
      "synonyms": [
        "II login",
        "AuthClient integration",
        "InternetIdentityProvider"
      ],
      "description": "Provides a React context around DFINITY AuthClient to load/persist identities, initiate Internet Identity login, and logout/clear identity, exposing login lifecycle status flags.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-2",
      "title": "Identity-bound canister actor creation + query cache refresh",
      "synonyms": [
        "useActor",
        "actor factory",
        "agent identity binding"
      ],
      "description": "Creates a backend actor using the current identity (or anonymous actor when logged out) and recreates it on identity changes; invalidates and refetches React Query caches when the actor changes.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-3",
      "title": "Secret token extraction from URL hash with session persistence",
      "synonyms": [
        "getSecretParameter",
        "hash secret",
        "sessionStorage token"
      ],
      "description": "Reads sensitive parameters from the URL hash fragment, persists them to sessionStorage, and clears them from the URL to reduce leakage (used for admin bootstrap token).",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-4",
      "title": "Access control initialization on authenticated actor creation",
      "synonyms": [
        "_initializeAccessControlWithSecret",
        "RBAC bootstrap"
      ],
      "description": "On authenticated actor creation, the frontend calls _initializeAccessControlWithSecret with the extracted secret so the backend can register the caller role (admin/user).",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-5",
      "title": "Role-based access control (RBAC) mixin APIs",
      "synonyms": [
        "AccessControl",
        "MixinAuthorization",
        "isCallerAdmin"
      ],
      "description": "Motoko authorization mixin exposes role/admin endpoints (getCallerUserRole, assignCallerUserRole, isCallerAdmin) and initializes roles based on an env admin token compared to a user-provided secret.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-6",
      "title": "Admin user listing with role metadata",
      "synonyms": [
        "getAllUserMetadataWithRoles",
        "admin user directory"
      ],
      "description": "Admin-only backend endpoint returns user principals with optional profiles and admin role flag; wrapped by a React Query hook for frontend consumption.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-7",
      "title": "Admin promotion/demotion with max-admin and last-admin guards",
      "synonyms": [
        "promoteToAdmin",
        "removeAdmin",
        "MAX_ADMINS"
      ],
      "description": "Admins can promote other users up to a maximum admin count, and can demote admins with a safeguard preventing removal of the last remaining admin.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-8",
      "title": "Admin Dashboard dialog UI",
      "synonyms": [
        "AdminDashboardDialog",
        "user search",
        "pagination",
        "copy principal"
      ],
      "description": "Admin-only dialog to browse users with client-side search and pagination, copy principal IDs to clipboard, and promote/demote admins with loading states and toast error handling.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-9",
      "title": "User profile read/write",
      "synonyms": [
        "UserProfile",
        "getCallerUserProfile",
        "saveCallerUserProfile"
      ],
      "description": "Fetches and saves per-user profile data (name, earningsEnabled, tier). Backend preserves tier on profile updates.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-10",
      "title": "User tier labeling utility",
      "synonyms": [
        "getUserTierLabel",
        "tier display mapping"
      ],
      "description": "Maps backend UserTier enum values to user-facing labels (Basic/Silver/Gold/Diamond) with a safe default fallback.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-11",
      "title": "Default custom list seeding for new users",
      "synonyms": [
        "Week list",
        "Month list",
        "new user defaults"
      ],
      "description": "On first user creation, backend seeds two non-quadrant custom lists named “Week” and “Month” and updates nextListId accordingly.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-12",
      "title": "Per-user quadrant list initialization (Eisenhower 2×2)",
      "synonyms": [
        "ensureAllQuadrants",
        "quadrant lists",
        "Eisenhower matrix lists"
      ],
      "description": "Backend idempotently ensures each user has four fixed quadrant lists with urgent/important semantics (IDs 1–4). Missing quadrants are auto-added when users are loaded.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-13",
      "title": "Frontend quadrant bootstrap with bounded retries",
      "synonyms": [
        "bootstrapQuadrants",
        "quadrantsReady gating",
        "initialization polling"
      ],
      "description": "Frontend helper calls ensureAllQuadrants and refetches lists with bounded retries until all 4 quadrants exist, failing fast on authorization-like errors with a user-friendly message.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-14",
      "title": "Task and list retrieval hooks",
      "synonyms": [
        "useTaskQueries",
        "getAllTasks",
        "getAllLists"
      ],
      "description": "Fetches all tasks and lists for the authenticated user via React Query and exposes them (plus derived quadrantsReady) to the main UI.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-15",
      "title": "Task CRUD with validation and weight calculation",
      "synonyms": [
        "createTask",
        "updateTask",
        "deleteTask",
        "calculateTaskWeight"
      ],
      "description": "Creates/updates/deletes tasks with backend validation (title length, list existence) and computed weight from urgent/important/long-task flags.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-16",
      "title": "Dedicated task completion endpoint with optimistic UI",
      "synonyms": [
        "completeTask",
        "toggleTaskCompletion",
        "optimistic checkbox"
      ],
      "description": "Toggles task completion via a dedicated backend endpoint. Frontend applies an optimistic React Query cache patch with rollback on error.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-17",
      "title": "Move tasks between lists with destination-derived semantics",
      "synonyms": [
        "moveTask",
        "drag between lists",
        "quadrant semantics"
      ],
      "description": "Moves a task to a destination list; backend applies the destination list’s urgent/important flags and recalculates weight. Frontend applies an optimistic cache patch and then reconciles with invalidation.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-18",
      "title": "Sparse ordering + reordering for tasks",
      "synonyms": [
        "updateTaskPosition",
        "midpoint insertion",
        "START_OFFSET"
      ],
      "description": "Reorders tasks using sparse integer orders with midpoint insertion; backend can renormalize orders when spacing collapses. Frontend computes optimistic ordering and then invalidates to reconcile.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-19",
      "title": "Custom list CRUD with quadrant protection and cascade task deletion",
      "synonyms": [
        "createList",
        "deleteList",
        "Plan mode lists"
      ],
      "description": "Allows creating non-quadrant custom lists and deleting them (quadrant lists are protected). Deleting a custom list cascades by removing its tasks.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-20",
      "title": "Stable drag payload serialization utility",
      "synonyms": [
        "writeDragPayload",
        "readDragPayload",
        "custom MIME type"
      ],
      "description": "Serializes drag payload JSON into DataTransfer using a custom MIME type with text/plain fallback for cross-browser reliability and robust parsing.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-21",
      "title": "Universal Add Task dialog (quadrant prediction + custom list add)",
      "synonyms": [
        "UniversalAddTaskDialog",
        "Add task modal",
        "preselected list"
      ],
      "description": "Unified task creation dialog with a Quadrant tab (urgent/important/long-task toggles and predicted quadrant) and an Other Lists tab (choose a custom list; urgent forced false). Supports pre-selecting a target list and disables quadrant inputs until quadrants are ready.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-22",
      "title": "Edit Task dialog with list-aware constraints",
      "synonyms": [
        "EditTaskDialog",
        "task property editor"
      ],
      "description": "Edits task title/description/list and flags with UX constraints depending on list type (quadrant semantics vs custom lists). Includes long-task and completed toggles in the UI.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-23",
      "title": "Task card long-press edit mode + desktop and touch drag-and-drop",
      "synonyms": [
        "mobile drag",
        "press-and-hold to drag",
        "edit mode"
      ],
      "description": "Task cards support long-press to enter edit/drag mode, HTML5 drag on desktop, and touch drop targeting via elementFromPoint with data attributes for list and index, plus visual drag feedback.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-24",
      "title": "Eisenhower Matrix (Daily Priorities) UI",
      "synonyms": [
        "EisenhowerMatrix",
        "2×2 quadrant board",
        "expand/collapse"
      ],
      "description": "Expandable 2×2 matrix rendering tasks by quadrant with drag-and-drop, empty-state drop targets, and a stable loading placeholder until all 4 quadrant lists exist. Includes a Plan button to switch modes.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-25",
      "title": "Plan mode custom lists board UI",
      "synonyms": [
        "CustomLists",
        "My Lists board",
        "horizontal list columns"
      ],
      "description": "Displays custom lists as horizontally scrollable columns with internal scrolling, per-list quick add, list deletion UX, and drag-and-drop movement/reordering (desktop + touch).",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-26",
      "title": "Morning and evening routines (CRUD + completion)",
      "synonyms": [
        "MorningRoutine",
        "Evening routine"
      ],
      "description": "Supports creating, listing, completing, and deleting routine items across two sections; UI includes collapsible panels and delete confirmation.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-27",
      "title": "Routine streak tracking and milestone visual effects",
      "synonyms": [
        "streakCount",
        "routine weights",
        "streak visualization"
      ],
      "description": "Backend stores streakCount and derived weight per routine; frontend displays streak counters and milestone-based visual effects (shimmer/sparkle/glow) for longer streaks.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-28",
      "title": "Routine reorder mode with long-press activation",
      "synonyms": [
        "routine reorder",
        "drag handles",
        "Done button"
      ],
      "description": "Long-press enters reorder mode for routines; supports mouse and touch drag-and-drop reordering and a Done button to exit reorder mode.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-29",
      "title": "Daily reset workflow (new day rollover)",
      "synonyms": [
        "resetNewDay",
        "performRoutineDailyResetIfNeeded",
        "daily rollover"
      ],
      "description": "Backend resets day state when epoch day changes: clears quadrant tasks (keeps custom list tasks), resets routine completion while updating streaks/weights, and logs unsubmitted earnings into payroll history when present.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-30",
      "title": "Persisted UI modes (app mode + routine layout)",
      "synonyms": [
        "getUserDisplayMode",
        "setUserDisplayMode",
        "useAppMode",
        "displayMode"
      ],
      "description": "Stores and retrieves a per-user numeric mode value and uses it to control routine layout (single vs two-column) and app mode selection (Home vs Plan).",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-31",
      "title": "Workspace bootstrap flow (quadrants then reset)",
      "synonyms": [
        "bootstrap state machine",
        "initialization loading screen"
      ],
      "description": "After profile load, frontend bootstraps quadrants (if needed) then calls resetNewDay using a small state machine to avoid infinite loops and show a dedicated “Initializing workspace…” loading state.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-32",
      "title": "Earnings system enable/disable toggle",
      "synonyms": [
        "earningsEnabled",
        "toggleEarningsSystem",
        "useEarningsEnabled"
      ],
      "description": "Allows enabling/disabling the earnings system; backend rejects enabling when maxMoneyPerDay is zero. Frontend uses an optimistic toggle and invalidates related queries.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-33",
      "title": "Monetary settings configuration UI with validation",
      "synonyms": [
        "SettingsDialog",
        "bucket distribution",
        "save & enable"
      ],
      "description": "Settings dialog configures maxMoneyPerDay and bucket allocations (morning/priorities/evening) via sliders and validates bucket sum equals maxMoneyPerDay; includes a guided prompt when enabling earnings with zero max money.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-34",
      "title": "Monetary settings and balance APIs",
      "synonyms": [
        "getMonetarySettings",
        "saveMonetarySettings",
        "addPayroll"
      ],
      "description": "Backend stores per-user monetary settings and running totalBalance. Frontend supports fetching/saving settings (optimistic UI) and adding payroll to increase balance.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-35",
      "title": "Today Earns calculation and payroll submission UI",
      "synonyms": [
        "TodayEarnsDialog",
        "income breakdown",
        "submit payroll"
      ],
      "description": "Calculates today’s income client-side from completed quadrant tasks (weight-based) and routines (weight-based), displays a breakdown and total, and submits payroll to increase the running balance.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-36",
      "title": "Payroll history APIs and UI (view/edit/submit)",
      "synonyms": [
        "PayrollHistoryDialog",
        "getPayrollHistory",
        "submitPayrollLog",
        "editPayrollLog"
      ],
      "description": "Backend stores payroll records keyed by date; supports listing history, editing unsubmitted records, and submitting a record to apply it to totalBalance. Frontend shows a dialog with inline editing and submission actions.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-37",
      "title": "Spend tracking (create/delete) with pre-deducted type",
      "synonyms": [
        "SpendPlanDialog",
        "SpendRecord",
        "SpendType.preDeducted"
      ],
      "description": "Users can create/delete spend records; normal spends reduce balance, while “Pre-deducted” spends are logged without reducing balance.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-38",
      "title": "Spend presets (CRUD) + quick-add confirmation UX",
      "synonyms": [
        "SpendPreset",
        "createPreset",
        "updatePreset",
        "deletePreset"
      ],
      "description": "Supports creating/updating/deleting spend presets and quick-adding spends from presets with a confirmation dialog; presets can be edited and deleted in-place.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-39",
      "title": "Insights dialog (Spend Insights v1)",
      "synonyms": [
        "InsightsDialog",
        "recharts spend chart",
        "time period selector"
      ],
      "description": "Insights modal provides Spend Insights with daily/weekly/all-time filters, date aggregation, bar chart visualization, totals, and a balance status indicator. Earning/Task insights tabs are present but disabled placeholders.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-40",
      "title": "Bottom navigation with gesture-driven menu and Plan mode switching",
      "synonyms": [
        "BottomNavigation",
        "swipe-up menu",
        "long-press Plan"
      ],
      "description": "Fixed bottom navigation supports tap to add task, swipe up to open a menu, and long-press to switch into Plan mode; Plan mode shows Add Task/Add List actions and an X button to exit.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-41",
      "title": "Theme toggle (light/dark)",
      "synonyms": [
        "ThemeToggle",
        "next-themes",
        "dark mode"
      ],
      "description": "Toggles light/dark themes using next-themes with class-based theming and animated sun/moon icons.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-42",
      "title": "Offline connectivity overlay",
      "synonyms": [
        "OfflineIndicator",
        "navigator.onLine"
      ],
      "description": "Displays a full-screen blocking overlay when the browser reports loss of connectivity to communicate that the app requires internet access.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-43",
      "title": "PWA installability (manifest, icons, iOS meta tags, service worker)",
      "synonyms": [
        "manifest.json",
        "sw.js",
        "standalone mode",
        "apple-touch-icon"
      ],
      "description": "Includes a PWA manifest with standalone display and consistent 192/512 icons, iOS install meta tags and touch icons in index.html, and a service worker that precaches core assets and provides offline fallback for navigation.",
      "reqIds": [
        "REQ-4",
        "REQ-5",
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "IF-44",
      "title": "Branding: Momentum logo in header and login screen",
      "synonyms": [
        "Header logo",
        "UnauthenticatedScreen logo",
        "static asset branding"
      ],
      "description": "Uses a bundled Momentum logo asset in both the global header and unauthenticated login UI with object-contain sizing.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-45",
      "title": "LocalTask/LocalList wrapper types for stable React keys",
      "synonyms": [
        "LocalTask",
        "LocalList",
        "toLocalTask/toLocalList"
      ],
      "description": "Extends backend Task/List objects with deterministic localId fields for stable React list rendering and provides conversion helpers.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-46",
      "title": "Footer attribution UI",
      "synonyms": [
        "Footer",
        "caffeine.ai attribution"
      ],
      "description": "Renders a footer with copyright notice and a caffeine.ai attribution link.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "feature-update-the-plan-mode-x-button-behavior-so-that-pressing-x-does-not-switch-the-app-mode-must-not-call-the-existing-plan-home-mode-switch-instead-while-remaining-in-plan-mode-pressing-x-must-only-1-hide-the-my-lists-customlists-section-and-2-unhide-show-the-morning-routine-and-evening-routine-sections-to-eliminate-the-current-flickering-caused-by-mode-switching-unmounting",
      "title": "Update the Plan mode X button behavior so that pressing X does NOT switch the app mode (must not call the existing Plan→Home mode switch). Instead, while remaining in Plan mode, pressing X must ONLY (1) hide the “My Lists” (CustomLists) section and (2) unhide/show the “Morning Routine” and “Evening Routine” sections, to eliminate the current flickering caused by mode switching/unmounting.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Change Plan mode X button behavior: it should only hide “My Lists” and show “Morning Routine” + “Evening Routine” (remove any other X-button logic) to eliminate the current flickering issue.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Add onboarding defaults for new users: create empty custom lists “Week” and “Month” on first registration (one-time, not auto-recreated if deleted).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Seed onboarding Morning/Evening routines for new users with exact provided instructional texts and stable routine behavior (same as user-created routines).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Admin foundation upgrades: Admin Dashboard as a dedicated page (not modal) with user table columns [Username, Principal (copy), Email, Tier dropdown, Role, Actions], plus search + pagination; require unique username and email field on registration with update support; all users start Basic tier.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Earnings system toggle: block enabling when maxMoneyPerDay==0 and prompt user to enter maxMoneyPerDay + bucket distribution before enabling; hide monetary UI/queries when earnings disabled.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Spend Plan Phase 1+2: spend tracking that deducts from balance except ‘Pre-deducted’ category; quick-add presets with confirmation; customizable presets; compact one-row custom spend entry UI.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Insights Hub: single popup launched from expanded menu with tabs (Spend/Earn/Task Insights), Phase 1 implements Spend Insights chart view.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Add Task dialog improvement: replace ‘Other Lists’ dropdown with horizontal swipeable custom-list pills (no quadrants in selector) and per-list (+) button auto-selects that list in the dialog.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "PWA polish: update manifest icons (192/512) and ensure installed app launches fully standalone (no browser chrome) on iOS + Android.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "architectural_notes": [
    "Frontend uses React + TypeScript with TailwindCSS and shadcn/ui; most flows are implemented as dialogs/modals (settings, earns, spend plan, insights, admin).",
    "Data fetching/mutations are centralized in custom hooks built on @tanstack/react-query with query-key caching, invalidation, and targeted optimistic updates (notably task completion, task move/reorder, routine completion/reorder, settings toggles).",
    "Authentication uses Internet Identity via @dfinity/auth-client; identity is provided via a React context and used to create an identity-bound canister actor.",
    "Backend is a single Motoko actor using in-memory Map-based per-user state keyed by Principal (lists, tasks, routines, payroll history, monetary settings, spends, presets).",
    "Authorization is implemented via an AccessControl module mixed into the canister (MixinAuthorization); roles are initialized using an env-provided admin token compared to a user-provided secret.",
    "Quadrant lists (IDs 1–4) are ensured idempotently per user; the frontend includes a bounded-retry bootstrap helper to ensure quadrants exist before continuing.",
    "Tasks and routines use sparse integer ordering with midpoint insertion and optional backend renormalization when order spacing collapses.",
    "Drag-and-drop supports HTML5 DnD on desktop and touch interactions on mobile (long-press to enter drag/reorder modes; elementFromPoint targeting).",
    "PWA support includes manifest + iOS meta tags + a service worker (network-first with cache fallback) plus an in-app offline overlay driven by navigator.onLine.",
    "A single persisted backend numeric field (displayMode) is currently used for multiple UI behaviors (routine layout and app mode), coupling unrelated preferences."
  ],
  "known_issues": [
    "Motoko canister state uses only in-memory variables (no stable vars), so all user data will be lost across canister upgrades.",
    "Money units/precision are inconsistent: backend stores spends as Float and adjusts balances via amount.toInt() (truncates cents), while parts of the UI treat payroll totals/balance as cents (/100) and display with 2 decimals, risking drift and incorrect balances.",
    "Backend updateTask ignores the incoming completed flag (it preserves old completion), so the Edit Task dialog’s “Completed” toggle cannot work as implemented; completion must go through completeTask.",
    "TaskManager mounts many React Query hooks even when logged out; because an anonymous actor still exists, several queries can call user-only endpoints and trap with Unauthorized errors (console noise / error states).",
    "RBAC bootstrap traps if CAFFEINE_ADMIN_TOKEN environment variable is not set when _initializeAccessControlWithSecret is called.",
    "Service worker caches every successful fetch response without allowlisting or eviction, risking unbounded cache growth and caching of dynamic/authenticated responses.",
    "A single backend field (User.displayMode) is reused for multiple unrelated settings (routine layout vs app mode), so changing one can unintentionally affect the other.",
    "earningsEnabled exists both in UserProfile and in the User record; toggleEarningsSystem changes only the User field, allowing divergence from profile state.",
    "There appear to be duplicate/competing CSS sources in the repo snapshot (frontend/src/index.css vs frontend/index.css), increasing risk of theme token conflicts or unintended overrides.",
    "Placeholder/unused components exist (e.g., frontend/src/components/MonetarySettingsDialog.tsx and CreateTaskDialog.tsx are empty), indicating dead code or incomplete refactors."
  ],
  "isFixRequest": true,
  "generatedImages": [],
  "gameProjectType": "none",
  "projectName": "Momentum",
  "clarification_mode": "pro",
  "clarification_rounds": 0
}